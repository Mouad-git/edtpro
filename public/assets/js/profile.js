const _0x451494=_0x1774;(function(_0x189086,_0x168a6c){const _0x5f2933=_0x1774,_0x25fb16=_0x189086();while(!![]){try{const _0x36a724=-parseInt(_0x5f2933(0x97))/0x1+-parseInt(_0x5f2933(0x6d))/0x2+-parseInt(_0x5f2933(0xc1))/0x3*(parseInt(_0x5f2933(0xc9))/0x4)+parseInt(_0x5f2933(0xb6))/0x5+parseInt(_0x5f2933(0x91))/0x6+parseInt(_0x5f2933(0x86))/0x7+parseInt(_0x5f2933(0x81))/0x8*(parseInt(_0x5f2933(0x8a))/0x9);if(_0x36a724===_0x168a6c)break;else _0x25fb16['push'](_0x25fb16['shift']());}catch(_0x211f70){_0x25fb16['push'](_0x25fb16['shift']());}}}(_0x434e,0xaac63));async function checkSessionAndLoad(){const _0x1e83e8=_0x1774;try{let _0x58f9c2=await fetch(_0x1e83e8(0x77)),_0x335f61=await _0x58f9c2[_0x1e83e8(0x67)]();if(!_0x335f61[_0x1e83e8(0x9d)]){window[_0x1e83e8(0xcc)][_0x1e83e8(0xa7)]=_0x1e83e8(0xb9);return;}populateUserInfo(_0x335f61[_0x1e83e8(0xa0)]),setupProfileMenu(),loadPageData(),setupTabNavigation(),setupFormSubmissions();}catch(_0x3bdcbe){console[_0x1e83e8(0xa9)]('Erreur:',_0x3bdcbe),window[_0x1e83e8(0xcc)][_0x1e83e8(0xa7)]='login.html';}}function getInitials(_0xc31c8f){const _0x51ac21=_0x1774;if(!_0xc31c8f||'string'!=typeof _0xc31c8f)return'--';let _0x4f2258=_0xc31c8f[_0x51ac21(0x96)]()[_0x51ac21(0xc7)]('\x20');return 0x1===_0x4f2258[_0x51ac21(0x7e)]?_0x4f2258[0x0][_0x51ac21(0xd7)](0x0,0x2)[_0x51ac21(0x80)]():(_0x4f2258[0x0][0x0]+_0x4f2258[_0x4f2258['length']-0x1][0x0])['toUpperCase']();}function populateUserInfo(_0x5ec815){const _0x2e8d06=_0x1774;if(!_0x5ec815)return;let _0x5f8066=document[_0x2e8d06(0x85)](_0x2e8d06(0xc2));_0x5f8066&&(_0x5f8066[_0x2e8d06(0x6b)]=getInitials(_0x5ec815[_0x2e8d06(0xc8)]));let _0x7f07eb=document[_0x2e8d06(0x85)](_0x2e8d06(0x89)),_0x4641e0=document[_0x2e8d06(0x85)]('dropdown-user-email');_0x7f07eb&&(_0x7f07eb['textContent']=_0x5ec815[_0x2e8d06(0xc8)]),_0x4641e0&&(_0x4641e0[_0x2e8d06(0x6b)]=_0x5ec815['email']);let _0x161417=document['getElementById'](_0x2e8d06(0x84)),_0x20a972=document[_0x2e8d06(0x85)](_0x2e8d06(0x7c)),_0x5e8ccb=document[_0x2e8d06(0x85)](_0x2e8d06(0xce)),_0x595f16=_0x5ec815[_0x2e8d06(0x7f)]||_0x5ec815['nom'];_0x161417&&(_0x161417[_0x2e8d06(0x6b)]=getInitials(_0x595f16)),_0x20a972&&(_0x20a972[_0x2e8d06(0x6b)]=_0x595f16),_0x5e8ccb&&(_0x5e8ccb[_0x2e8d06(0x6b)]=_0x5ec815['nom_etablissement']);}function setupProfileMenu(){const _0x3156e9=_0x1774;let _0x48f41f=document[_0x3156e9(0x85)](_0x3156e9(0xb5)),_0x1f919d=document['getElementById']('profile-dropdown');_0x48f41f&&_0x1f919d&&_0x48f41f['addEventListener'](_0x3156e9(0x68),_0x530d29=>{const _0x416615=_0x3156e9;_0x530d29[_0x416615(0x78)](),_0x1f919d[_0x416615(0xd0)][_0x416615(0x71)](_0x416615(0xd2));}),window['addEventListener'](_0x3156e9(0x68),()=>{const _0x4f7510=_0x3156e9;_0x1f919d&&_0x1f919d['classList'][_0x4f7510(0x82)](_0x4f7510(0xd2))&&_0x1f919d[_0x4f7510(0xd0)][_0x4f7510(0x92)](_0x4f7510(0xd2));});}function loadPageData(){const _0x2fb72d=_0x1774;fetch(_0x2fb72d(0x88))['then'](_0x449b7a=>_0x449b7a[_0x2fb72d(0x67)]())['then'](_0x32414c=>{const _0x2ef365=_0x2fb72d;if(_0x32414c[_0x2ef365(0x9d)]){let _0x566752=_0x32414c[_0x2ef365(0x8e)];document[_0x2ef365(0x85)](_0x2ef365(0x7f))[_0x2ef365(0xcf)]=_0x566752[_0x2ef365(0x69)][_0x2ef365(0x7f)]||'',document[_0x2ef365(0x85)](_0x2ef365(0xc0))['value']=_0x566752[_0x2ef365(0x69)][_0x2ef365(0xc0)]||'',document['getElementById']('etablissement_name')[_0x2ef365(0x6b)]=_0x566752['user'][_0x2ef365(0xc6)]||'',document[_0x2ef365(0x85)](_0x2ef365(0xc4))[_0x2ef365(0x6b)]=_0x566752['user'][_0x2ef365(0x87)]||'',document['getElementById'](_0x2ef365(0xbc))['value']=(_0x566752[_0x2ef365(0xbc)]||[])[_0x2ef365(0xc5)]('\x0a')||'';let _0x4203bf=document['getElementById'](_0x2ef365(0x6f));_0x4203bf[_0x2ef365(0x79)](_0x2ef365(0xd1))[_0x2ef365(0xb2)](_0x3cf81a=>_0x3cf81a[_0x2ef365(0x92)]());let _0x274682=_0x566752[_0x2ef365(0xbc)]||[];_0x274682['forEach'](_0x294c49=>{createEspaceTag(_0x294c49);}),updateHiddenEspacesTextarea(),document['getElementById'](_0x2ef365(0x83))[_0x2ef365(0xcf)]=_0x566752[_0x2ef365(0x95)]['holidays']||'',document['getElementById'](_0x2ef365(0x9f))[_0x2ef365(0xcf)]=_0x566752[_0x2ef365(0x95)][_0x2ef365(0x9f)]||'';let _0xe56f04=document[_0x2ef365(0x85)](_0x2ef365(0x74));_0xe56f04[_0x2ef365(0xbb)]='',(_0x566752[_0x2ef365(0xbd)]||[])[_0x2ef365(0xb2)](_0x5b601a=>{const _0x36a165=_0x2ef365;let _0x1a64c6='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b601a[_0x36a165(0xc8)]||'')+_0x36a165(0xb1)+(_0x5b601a[_0x36a165(0xc3)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20name=\x22formateurs['+_0x5b601a[_0x36a165(0xc3)]+'][masse_horaire]\x22\x20type=\x22number\x22\x20class=\x22form-control\x22\x20value=\x22'+(_0x5b601a[_0x36a165(0x73)]||'')+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20name=\x22formateurs['+_0x5b601a['matricule']+_0x36a165(0xa8)+(_0x5b601a['email']||'')+_0x36a165(0x7b)+_0x5b601a['matricule']+'][nom]\x22\x20value=\x22'+(_0x5b601a[_0x36a165(0xc8)]||'')+_0x36a165(0xba)+_0x5b601a['matricule']+_0x36a165(0x8d)+(_0x5b601a[_0x36a165(0xc3)]||'')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';_0xe56f04[_0x36a165(0xbb)]+=_0x1a64c6;});}else alert('Erreur:\x20Impossible\x20de\x20charger\x20les\x20données\x20du\x20profil.');})[_0x2fb72d(0x6a)](_0x22beaa=>{const _0x310f33=_0x2fb72d;console[_0x310f33(0xa9)](_0x310f33(0xab),_0x22beaa),alert(_0x310f33(0x90));});}function _0x1774(_0x233700,_0x447d77){const _0x434e67=_0x434e();return _0x1774=function(_0x1774e8,_0x413995){_0x1774e8=_0x1774e8-0x65;let _0x30d5b2=_0x434e67[_0x1774e8];return _0x30d5b2;},_0x1774(_0x233700,_0x447d77);}function setupEspacesTagInput(){const _0x4fb15f=_0x1774;let _0x4c2f2f=document[_0x4fb15f(0x85)](_0x4fb15f(0x6f)),_0xa32a55=document[_0x4fb15f(0x85)]('espaces-input');_0x4c2f2f[_0x4fb15f(0x99)](_0x4fb15f(0x68),()=>{const _0x595a88=_0x4fb15f;_0xa32a55[_0x595a88(0x9c)]();}),_0xa32a55[_0x4fb15f(0x99)]('keydown',_0x17e2ae=>{const _0xd74731=_0x4fb15f;if('Enter'===_0x17e2ae[_0xd74731(0x66)]){_0x17e2ae['preventDefault']();let _0x39b5e2=_0xa32a55[_0xd74731(0xcf)][_0xd74731(0x96)]();_0x39b5e2&&(createEspaceTag(_0x39b5e2),_0xa32a55['value']='',updateHiddenEspacesTextarea());}});}function _0x434e(){const _0x306c49=['message','Une\x20erreur\x20s\x27est\x20produite\x20lors\x20du\x20chargement\x20des\x20données\x20du\x20profil.','5764836CeVhMD','remove','../api/profile/update_establishment_info.php','DOMContentLoaded','calendar','trim','1385272fDoRQa','new_password','addEventListener','formateursForm','../api/profile/update_formateurs.php','focus','success','.sidebar-link','vacations','userData','../api/profile/update_password.php','userInfoForm','preventDefault','div','map','userInfoFeedback','href','][email]\x22\x20type=\x22email\x22\x20class=\x22form-control\x22\x20value=\x22','error','from','Erreur\x20lors\x20du\x20chargement\x20des\x20données:','then','tag-remove','values','../api/profile/update_user_info.php','.panel','</td><td>','forEach','active','span','profile-button','2607380SHpcMx','add','reset','login.html','\x22><input\x20type=\x22hidden\x22\x20name=\x22formateurs[','innerHTML','espaces','formateurs','appendChild','Les\x20mots\x20de\x20passe\x20ne\x20correspondent\x20pas.','email','856308FZGMQQ','profile-initials','matricule','complexe_name','join','nom_etablissement','split','nom','16MdLUlm','createElement','entries','location','formateursFeedback','profile-page-etablissement','value','classList','.tag','show','confirm_new_password','className','dataset','passwordFeedback','substring','querySelector','stringify','key','json','click','user','catch','textContent','submit','415298IkrBSp','insertBefore','espaces-tag-container','target','toggle','application/json','masse_horaire','formateurs-table-body','filter','tag','../api/auth/verify_session.php','stopPropagation','querySelectorAll','POST','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20name=\x22formateurs[','profile-page-name','feedback-message\x20feedback-success','length','nom_complet','toUpperCase','176CaOFzz','contains','holidays','profile-page-initials','getElementById','124824CeAFYg','complexe','../api/profile/get_profile_data.php','dropdown-user-name','791199vdSaVi','feedback-message\x20feedback-error','espaces-input','][matricule]\x22\x20value=\x22','data'];_0x434e=function(){return _0x306c49;};return _0x434e();}function createEspaceTag(_0x12203c){const _0x3ca725=_0x1774;let _0x149cab=document[_0x3ca725(0x85)](_0x3ca725(0x6f)),_0x2ebb87=document[_0x3ca725(0x85)](_0x3ca725(0x8c)),_0x298897=document[_0x3ca725(0xca)](_0x3ca725(0xa4));_0x298897[_0x3ca725(0xd4)]=_0x3ca725(0x76);let _0x1c53d5=document['createElement'](_0x3ca725(0xb4));_0x1c53d5['textContent']=_0x12203c;let _0x3bb2ec=document[_0x3ca725(0xca)](_0x3ca725(0xb4));_0x3bb2ec['className']=_0x3ca725(0xad),_0x3bb2ec[_0x3ca725(0xbb)]='×',_0x3bb2ec[_0x3ca725(0x99)]('click',()=>{const _0x38269a=_0x3ca725;_0x298897[_0x38269a(0x92)](),updateHiddenEspacesTextarea();}),_0x298897[_0x3ca725(0xbe)](_0x1c53d5),_0x298897[_0x3ca725(0xbe)](_0x3bb2ec),_0x149cab[_0x3ca725(0x6e)](_0x298897,_0x2ebb87);}function updateHiddenEspacesTextarea(){const _0x500d22=_0x1774;let _0x32d525=document[_0x500d22(0x85)](_0x500d22(0x6f)),_0xd041c8=_0x32d525[_0x500d22(0x79)](_0x500d22(0xd1)),_0x2712c7=document[_0x500d22(0x85)](_0x500d22(0xbc)),_0x4813a7=Array[_0x500d22(0xaa)](_0xd041c8)[_0x500d22(0xa5)](_0x34872f=>_0x34872f[_0x500d22(0xd8)](_0x500d22(0xb4))['textContent']);_0x2712c7['value']=_0x4813a7[_0x500d22(0xc5)]('\x0a');}function setupTabNavigation(){const _0x49dcac=_0x1774;let _0x505667=document[_0x49dcac(0x79)](_0x49dcac(0x9e)),_0x2d8fc1=document[_0x49dcac(0x79)](_0x49dcac(0xb0));_0x505667['forEach'](_0x494fcf=>{_0x494fcf['addEventListener']('click',_0x3740e9=>{const _0x3403e4=_0x1774;_0x3740e9[_0x3403e4(0xa3)](),_0x505667[_0x3403e4(0xb2)](_0x698441=>_0x698441[_0x3403e4(0xd0)]['remove']('active')),_0x494fcf[_0x3403e4(0xd0)]['add'](_0x3403e4(0xb3));let _0x242c55=_0x494fcf[_0x3403e4(0xd5)][_0x3403e4(0x70)];_0x2d8fc1[_0x3403e4(0xb2)](_0x1838bf=>_0x1838bf[_0x3403e4(0xd0)][_0x3403e4(0x92)]('active'));let _0x370687=document[_0x3403e4(0x85)](_0x242c55);_0x370687&&_0x370687['classList'][_0x3403e4(0xb7)](_0x3403e4(0xb3));});});}function showFeedback(_0x13c022,_0x439895,_0x4561c3){const _0x4e2019=_0x1774;let _0x574b7a=document['getElementById'](_0x13c022);_0x574b7a&&(_0x574b7a[_0x4e2019(0x6b)]=_0x439895,_0x574b7a[_0x4e2019(0xd4)]=_0x4561c3?_0x4e2019(0x7d):_0x4e2019(0x8b),setTimeout(()=>{const _0x44e22f=_0x4e2019;_0x574b7a[_0x44e22f(0x6b)]='';},0xfa0));}function setupFormSubmissions(){const _0x2e1689=_0x1774;document[_0x2e1689(0x85)](_0x2e1689(0xa2))[_0x2e1689(0x99)](_0x2e1689(0x6c),function(_0x5c87f8){const _0x1b5e82=_0x2e1689;_0x5c87f8[_0x1b5e82(0xa3)]();let _0x2454ca={'nom_complet':document[_0x1b5e82(0x85)](_0x1b5e82(0x7f))[_0x1b5e82(0xcf)],'email':document[_0x1b5e82(0x85)](_0x1b5e82(0xc0))[_0x1b5e82(0xcf)]};fetch(_0x1b5e82(0xaf),{'method':_0x1b5e82(0x7a),'headers':{'Content-Type':_0x1b5e82(0x72)},'body':JSON[_0x1b5e82(0x65)](_0x2454ca)})[_0x1b5e82(0xac)](_0x4b2e10=>_0x4b2e10[_0x1b5e82(0x67)]())[_0x1b5e82(0xac)](_0x3077b5=>{const _0x57b918=_0x1b5e82;showFeedback(_0x57b918(0xa6),_0x3077b5[_0x57b918(0x8f)],_0x3077b5[_0x57b918(0x9d)]),_0x3077b5[_0x57b918(0x9d)]&&populateUserInfo({'nom':_0x2454ca[_0x57b918(0x7f)],'email':_0x2454ca[_0x57b918(0xc0)],'nom_complet':_0x2454ca[_0x57b918(0x7f)],'nom_etablissement':document[_0x57b918(0x85)](_0x57b918(0xce))['textContent']});});}),document[_0x2e1689(0x85)]('passwordForm')[_0x2e1689(0x99)]('submit',function(_0x291fc5){const _0x456869=_0x2e1689;_0x291fc5[_0x456869(0xa3)]();let _0x127b0a=document['getElementById'](_0x456869(0x98))[_0x456869(0xcf)],_0x57550a=document[_0x456869(0x85)](_0x456869(0xd3))[_0x456869(0xcf)];if(_0x127b0a!==_0x57550a){showFeedback(_0x456869(0xd6),_0x456869(0xbf),!0x1);return;}fetch(_0x456869(0xa1),{'method':_0x456869(0x7a),'headers':{'Content-Type':_0x456869(0x72)},'body':JSON[_0x456869(0x65)]({'new_password':_0x127b0a,'confirm_new_password':_0x57550a})})[_0x456869(0xac)](_0x4c7aa3=>_0x4c7aa3[_0x456869(0x67)]())['then'](_0x5a7806=>{const _0x14fdae=_0x456869;showFeedback(_0x14fdae(0xd6),_0x5a7806[_0x14fdae(0x8f)],_0x5a7806[_0x14fdae(0x9d)]),_0x5a7806[_0x14fdae(0x9d)]&&this[_0x14fdae(0xb8)]();});}),document[_0x2e1689(0x85)]('espacesForm')[_0x2e1689(0x99)]('submit',function(_0xfce307){const _0x12c95f=_0x2e1689;_0xfce307['preventDefault']();let _0x4ed47b={'espaces':document[_0x12c95f(0x85)](_0x12c95f(0xbc))['value'][_0x12c95f(0xc7)]('\x0a')[_0x12c95f(0xa5)](_0x3ce438=>_0x3ce438[_0x12c95f(0x96)]())[_0x12c95f(0x75)](_0x2ea80e=>_0x2ea80e[_0x12c95f(0x7e)]>0x0)};fetch(_0x12c95f(0x93),{'method':_0x12c95f(0x7a),'headers':{'Content-Type':'application/json'},'body':JSON[_0x12c95f(0x65)](_0x4ed47b)})[_0x12c95f(0xac)](_0x23d37a=>_0x23d37a[_0x12c95f(0x67)]())['then'](_0x3ba0b1=>showFeedback('espacesFeedback',_0x3ba0b1[_0x12c95f(0x8f)],_0x3ba0b1['success']));}),document['getElementById']('calendarForm')[_0x2e1689(0x99)](_0x2e1689(0x6c),function(_0x32f0f2){const _0x472123=_0x2e1689;_0x32f0f2[_0x472123(0xa3)]();let _0x407e8a={'holidays':document[_0x472123(0x85)](_0x472123(0x83))[_0x472123(0xcf)],'vacations':document[_0x472123(0x85)](_0x472123(0x9f))[_0x472123(0xcf)]};fetch('../api/profile/update_establishment_info.php',{'method':_0x472123(0x7a),'headers':{'Content-Type':_0x472123(0x72)},'body':JSON[_0x472123(0x65)](_0x407e8a)})[_0x472123(0xac)](_0x1a7cca=>_0x1a7cca['json']())[_0x472123(0xac)](_0x368697=>showFeedback('calendarFeedback',_0x368697['message'],_0x368697[_0x472123(0x9d)]));}),document[_0x2e1689(0x85)](_0x2e1689(0x9a))[_0x2e1689(0x99)](_0x2e1689(0x6c),function(_0x546154){const _0x1defb5=_0x2e1689;_0x546154[_0x1defb5(0xa3)]();let _0x1d436a=new FormData(this),_0x4caa6c={};for(let [_0x5cb3d3,_0x263dec]of _0x1d436a[_0x1defb5(0xcb)]()){let _0x1def69=_0x5cb3d3['match'](/formateurs\[(.+?)]\[(.+?)]/);if(_0x1def69){let _0x31f6e0=_0x1def69[0x1],_0x35fae8=_0x1def69[0x2];_0x4caa6c[_0x31f6e0]||(_0x4caa6c[_0x31f6e0]={}),_0x4caa6c[_0x31f6e0][_0x35fae8]=_0x263dec;}}let _0x12d5f7={'formateurs':Object[_0x1defb5(0xae)](_0x4caa6c)};fetch(_0x1defb5(0x9b),{'method':_0x1defb5(0x7a),'headers':{'Content-Type':_0x1defb5(0x72)},'body':JSON['stringify'](_0x12d5f7)})['then'](_0x2a36d8=>_0x2a36d8[_0x1defb5(0x67)]())[_0x1defb5(0xac)](_0x2c49aa=>showFeedback(_0x1defb5(0xcd),_0x2c49aa['message'],_0x2c49aa['success']));});}document['addEventListener'](_0x451494(0x94),()=>{checkSessionAndLoad(),setupEspacesTagInput();});