const _0x175c75=_0x53a6;(function(_0x379bed,_0x382abf){const _0x24af8e=_0x53a6,_0x4ad1db=_0x379bed();while(!![]){try{const _0x36166f=-parseInt(_0x24af8e(0xb0))/0x1*(parseInt(_0x24af8e(0x7f))/0x2)+parseInt(_0x24af8e(0xa2))/0x3*(parseInt(_0x24af8e(0x73))/0x4)+-parseInt(_0x24af8e(0x92))/0x5+parseInt(_0x24af8e(0x93))/0x6*(-parseInt(_0x24af8e(0x75))/0x7)+parseInt(_0x24af8e(0x6b))/0x8+parseInt(_0x24af8e(0x8d))/0x9*(parseInt(_0x24af8e(0x6d))/0xa)+-parseInt(_0x24af8e(0x9a))/0xb;if(_0x36166f===_0x382abf)break;else _0x4ad1db['push'](_0x4ad1db['shift']());}catch(_0x5815b5){_0x4ad1db['push'](_0x4ad1db['shift']());}}}(_0x5b13,0xc41da));async function checkAdminSession(){const _0x2f2ea5=_0x53a6;try{let _0xefb3e5=await fetch('../api/auth/verify_admin_session.php');if(!_0xefb3e5['ok']){window[_0x2f2ea5(0x79)][_0x2f2ea5(0xa9)]=_0x2f2ea5(0x96);return;}loadAllUsers(),setupTabNavigation();}catch(_0x4e5fe7){window['location']['href']=_0x2f2ea5(0x96);}}async function loadAllUsers(){const _0x49027b=_0x53a6;let _0x4c157f={'pending':document[_0x49027b(0x6f)](_0x49027b(0xa6)),'approved':document[_0x49027b(0x6f)]('approved-users-table'),'rejected':document[_0x49027b(0x6f)](_0x49027b(0x89))},_0x3660a3=_0x3fe1cd=>_0x49027b(0xad)+_0x3fe1cd+'\x22\x20class=\x22px-6\x20py-4\x20text-center\x22>Chargement...</td></tr>';_0x4c157f[_0x49027b(0x87)][_0x49027b(0x7b)]=_0x3660a3(0x4),_0x4c157f[_0x49027b(0xab)][_0x49027b(0x7b)]=_0x3660a3(0x4),_0x4c157f[_0x49027b(0x8e)][_0x49027b(0x7b)]=_0x3660a3(0x4);try{let _0x552869=await fetch(_0x49027b(0xb1)),_0x248dd0=await _0x552869[_0x49027b(0x9f)]();if(_0x248dd0[_0x49027b(0x71)]){let _0x52dc4c=_0x248dd0[_0x49027b(0xa3)][_0x49027b(0xb6)](_0x1930db=>'pending'===_0x1930db[_0x49027b(0x83)]),_0x1cce39=_0x248dd0['data']['filter'](_0x5e2923=>'approved'===_0x5e2923['status']),_0x5ef3c4=_0x248dd0[_0x49027b(0xa3)]['filter'](_0x3cffaa=>'rejected'===_0x3cffaa[_0x49027b(0x83)]);updateStatsAndBadges(_0x52dc4c,_0x1cce39,_0x5ef3c4),renderPendingTable(_0x52dc4c),renderApprovedTable(_0x1cce39),renderRejectedTable(_0x5ef3c4);}else throw Error(_0x248dd0[_0x49027b(0x86)]);}catch(_0x5cf5ef){let _0x29044e=_0x49027b(0x88)+_0x5cf5ef[_0x49027b(0x86)]+_0x49027b(0x7e);Object[_0x49027b(0x97)](_0x4c157f)['forEach'](_0x415cc0=>_0x415cc0['innerHTML']=_0x29044e);}}function updateStatsAndBadges(_0x715db5,_0x241287,_0x4e743b){const _0x2913a6=_0x53a6;document['getElementById'](_0x2913a6(0xb4))[_0x2913a6(0xac)]=_0x715db5[_0x2913a6(0x95)],document[_0x2913a6(0x6f)](_0x2913a6(0x8f))[_0x2913a6(0xac)]=_0x241287[_0x2913a6(0x95)],document['getElementById'](_0x2913a6(0x9c))[_0x2913a6(0xac)]=_0x4e743b['length'],document[_0x2913a6(0x6f)](_0x2913a6(0x8c))[_0x2913a6(0xac)]=_0x715db5[_0x2913a6(0x95)]+_0x241287['length']+_0x4e743b[_0x2913a6(0x95)],document[_0x2913a6(0x6f)](_0x2913a6(0x90))[_0x2913a6(0xac)]=_0x715db5['length'],document[_0x2913a6(0x6f)](_0x2913a6(0xaf))['textContent']=_0x241287['length'],document[_0x2913a6(0x6f)](_0x2913a6(0x7c))[_0x2913a6(0xac)]=_0x4e743b[_0x2913a6(0x95)];}function _0x5b13(){const _0x319223=['Utilisateur\x20','filter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22font-medium\x22>','admin-tabs','868056HDhkcA','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22text-center\x22><span\x20class=\x22status-badge\x20badge-approved\x22><i\x20class=\x22fas\x20fa-check-circle\x20mr-1\x22></i>Approuvé</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','4126460iCgaVo','POST','getElementById','toggle','success','supprimé','12cJxywZ','\x20cet\x20utilisateur\x20?','1018738LisVsE','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-user-times\x22></i><p>Aucune\x20inscription\x20rejetée.</p></td></tr>','click','../api/admin/update_user_status.php','location','.tab-button','innerHTML','badge-rejected','forEach','</td></tr>','26990pbNhed','DOMContentLoaded','target','</td><td>','status','active','email','message','pending','<tr><td\x20colspan=\x224\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-red-500\x22>Erreur:\x20','rejected-users-table','classList','nom_etablissement','stat-total','27qJWqda','rejected','stat-approved','badge-pending','nom_complet','286225tmPaDI','18LnUrpe','\x20avec\x20succès.','length','login.html','values','Erreur:\x20','addEventListener','4192375IeVkXp','application/json','stat-rejected','Êtes-vous\x20sûr\x20de\x20vouloir\x20','stringify','json','supprimer\x20définitivement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22font-medium\x22>','709677QLCXAf','data','querySelectorAll','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-inbox\x22></i><p>Aucune\x20demande\x20en\x20attente.</p></td></tr>','pending-users-table','add',',\x20\x27approved\x27)\x22\x20class=\x22btn\x20btn-success\x22><i\x20class=\x22fas\x20fa-redo-alt\x20mr-1\x22></i>Ré-approuver</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22updateUserStatus(','href','deleted','approved','textContent','<tr><td\x20colspan=\x22','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-user-check\x22></i><p>Aucun\x20directeur\x20approuvé.</p></td></tr>','badge-approved','28ZnkKel','../api/admin/get_all_users.php','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22text-center\x22><div\x20class=\x22flex\x20justify-center\x20space-x-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22updateUserStatus(','.tab-content','stat-pending'];_0x5b13=function(){return _0x319223;};return _0x5b13();}function renderPendingTable(_0x517370){const _0x5aa7fb=_0x53a6;let _0x3222c1=document[_0x5aa7fb(0x6f)](_0x5aa7fb(0xa6));if(0x0===_0x517370[_0x5aa7fb(0x95)]){_0x3222c1[_0x5aa7fb(0x7b)]=_0x5aa7fb(0xa5);return;}_0x3222c1[_0x5aa7fb(0x7b)]='',_0x517370['forEach'](_0x5898dc=>{const _0x48bfcb=_0x5aa7fb;let _0x5a027a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22font-medium\x22>'+_0x5898dc['nom_complet']+_0x48bfcb(0x82)+_0x5898dc['email']+'</td><td>'+_0x5898dc[_0x48bfcb(0x8b)]+_0x48bfcb(0xb2)+_0x5898dc['id']+',\x20\x27approved\x27)\x22\x20class=\x22btn\x20btn-success\x22><i\x20class=\x22fas\x20fa-check\x20mr-1\x22></i>Approuver</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22updateUserStatus('+_0x5898dc['id']+',\x20\x27rejected\x27)\x22\x20class=\x22btn\x20btn-danger\x22><i\x20class=\x22fas\x20fa-times\x20mr-1\x22></i>Rejeter</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';_0x3222c1['innerHTML']+=_0x5a027a;});}function renderApprovedTable(_0xb7b0a){const _0x229c88=_0x53a6;let _0x42b46c=document[_0x229c88(0x6f)]('approved-users-table');if(0x0===_0xb7b0a['length']){_0x42b46c[_0x229c88(0x7b)]=_0x229c88(0xae);return;}_0x42b46c[_0x229c88(0x7b)]='',_0xb7b0a[_0x229c88(0x7d)](_0x3be36=>{const _0x4b4444=_0x229c88;let _0x22dcc9=_0x4b4444(0x69)+_0x3be36[_0x4b4444(0x91)]+_0x4b4444(0x82)+_0x3be36[_0x4b4444(0x85)]+_0x4b4444(0x82)+_0x3be36['nom_etablissement']+_0x4b4444(0x6c);_0x42b46c['innerHTML']+=_0x22dcc9;});}function renderRejectedTable(_0xf51045){const _0x248e3e=_0x53a6;let _0x52905d=document[_0x248e3e(0x6f)](_0x248e3e(0x89));if(0x0===_0xf51045[_0x248e3e(0x95)]){_0x52905d[_0x248e3e(0x7b)]=_0x248e3e(0x76);return;}_0x52905d[_0x248e3e(0x7b)]='',_0xf51045[_0x248e3e(0x7d)](_0x3110de=>{const _0x535371=_0x248e3e;let _0x33f942=_0x535371(0xa1)+_0x3110de['nom_complet']+_0x535371(0x82)+_0x3110de['email']+_0x535371(0x82)+_0x3110de[_0x535371(0x8b)]+_0x535371(0xb2)+_0x3110de['id']+_0x535371(0xa8)+_0x3110de['id']+',\x20\x27deleted\x27)\x22\x20class=\x22btn\x20btn-outline\x22><i\x20class=\x22fas\x20fa-trash-alt\x20mr-1\x22></i>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';_0x52905d['innerHTML']+=_0x33f942;});}async function updateUserStatus(_0x518f92,_0x14d1cb){const _0x2695ef=_0x53a6;let _0x2dd81a={'approved':'approuver','rejected':'rejeter','deleted':_0x2695ef(0xa0)};if(confirm(_0x2695ef(0x9d)+_0x2dd81a[_0x14d1cb]+_0x2695ef(0x74)))try{let _0x1e8dc6=await fetch(_0x2695ef(0x78),{'method':_0x2695ef(0x6e),'headers':{'Content-Type':_0x2695ef(0x9b)},'body':JSON[_0x2695ef(0x9e)]({'user_id':_0x518f92,'new_status':_0x14d1cb})}),_0x5bcbcc=await _0x1e8dc6[_0x2695ef(0x9f)]();_0x5bcbcc[_0x2695ef(0x71)]?(alert(_0x2695ef(0xb5)+(_0x2695ef(0xaa)===_0x14d1cb?_0x2695ef(0x72):_0x2dd81a[_0x14d1cb])+_0x2695ef(0x94)),loadAllUsers()):alert(_0x2695ef(0x98)+(_0x5bcbcc[_0x2695ef(0x86)]||'Impossible\x20de\x20mettre\x20à\x20jour\x20le\x20statut.'));}catch(_0x42c2c9){alert('Une\x20erreur\x20de\x20communication\x20est\x20survenue.');}}function setupTabNavigation(){const _0x8fdff5=_0x53a6;let _0x567919=document['getElementById'](_0x8fdff5(0x6a));_0x567919[_0x8fdff5(0x99)](_0x8fdff5(0x77),_0x43ea71=>{const _0x1b4445=_0x8fdff5;let _0x425ab9=_0x43ea71[_0x1b4445(0x81)]['closest'](_0x1b4445(0x7a));if(_0x425ab9){_0x567919[_0x1b4445(0xa4)](_0x1b4445(0x7a))[_0x1b4445(0x7d)](_0x27b8d3=>_0x27b8d3['classList']['remove']('active')),_0x425ab9[_0x1b4445(0x8a)][_0x1b4445(0xa7)](_0x1b4445(0x84));let _0x56d18c=_0x425ab9['dataset'][_0x1b4445(0x81)];document[_0x1b4445(0xa4)](_0x1b4445(0xb3))[_0x1b4445(0x7d)](_0x40dee4=>{const _0x595608=_0x1b4445;_0x40dee4['classList'][_0x595608(0x70)]('active',_0x40dee4['id']===_0x56d18c);});}});}function _0x53a6(_0x56e759,_0x4b844a){const _0x5b135c=_0x5b13();return _0x53a6=function(_0x53a634,_0xaead0a){_0x53a634=_0x53a634-0x69;let _0x59197b=_0x5b135c[_0x53a634];return _0x59197b;},_0x53a6(_0x56e759,_0x4b844a);}document[_0x175c75(0x99)](_0x175c75(0x80),checkAdminSession);